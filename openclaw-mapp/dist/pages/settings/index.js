"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[486],{1243:function(s,n,e){var t,c,a=e(6368),i=e(5738),o=e(6693),l=e(9551),r=e(2363),h=e(7653),d=e(3279),u=e(8677),m=e(758),p=e(7593),x=e(4340),w=e.n(x),f=e(6056),j=e(6070),N=(t=(0,f.WQ)("chatStore","counterStore"),t(c=(0,f.PA)(c=function(s){function n(){var s;(0,l.A)(this,n);for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return s=(0,h.A)(this,n,[].concat(t)),(0,u.A)(s,"wsUrlInput",""),(0,u.A)(s,"sessionIdInput",""),(0,u.A)(s,"handleWsUrlChange",function(n){s.wsUrlInput=n.detail.value}),(0,u.A)(s,"handleSessionIdChange",function(n){s.sessionIdInput=n.detail.value}),(0,u.A)(s,"handleSaveSettings",(0,o.A)((0,i.A)().m(function n(){var e;return(0,i.A)().w(function(n){while(1)switch(n.n){case 0:e=s.props.chatStore;try{e.setWsUrl(s.wsUrlInput.trim()),e.setSessionId(s.sessionIdInput.trim()),w().showToast({title:"\u4fdd\u5b58\u6210\u529f",icon:"success"})}catch(s){w().showToast({title:"\u4fdd\u5b58\u5931\u8d25",icon:"none"})}case 1:return n.a(2)}},n)}))),(0,u.A)(s,"handleConnect",(0,o.A)((0,i.A)().m(function n(){var e,t;return(0,i.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(e=s.props.chatStore,s.wsUrlInput&&s.wsUrlInput.trim()){n.n=1;break}return w().showToast({title:"\u8bf7\u8f93\u5165 WebSocket \u5730\u5740",icon:"none"}),n.a(2);case 1:return n.p=1,w().showLoading({title:"\u8fde\u63a5\u4e2d..."}),e.setWsUrl(s.wsUrlInput.trim()),n.n=2,e.connect();case 2:w().hideLoading(),w().showToast({title:"\u8fde\u63a5\u6210\u529f",icon:"success"}),n.n=4;break;case 3:n.p=3,t=n.v,w().hideLoading(),w().showToast({title:t.message||"\u8fde\u63a5\u5931\u8d25",icon:"none"});case 4:return n.a(2)}},n,null,[[1,3]])}))),(0,u.A)(s,"handleDisconnect",function(){var n=s.props.chatStore;n.disconnect(),w().showToast({title:"\u5df2\u65ad\u5f00\u8fde\u63a5",icon:"success"})}),(0,u.A)(s,"handleClearMessages",function(){var n=s.props.chatStore;w().showModal({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u6e05\u7a7a\u6240\u6709\u804a\u5929\u8bb0\u5f55\u5417\uff1f",success:function(s){s.confirm&&(n.clearMessages(),w().showToast({title:"\u5df2\u6e05\u7a7a",icon:"success"}))}})}),(0,u.A)(s,"handleAbout",function(){w().showModal({title:"\u5173\u4e8e OpenClaw",content:"OpenClaw \u662f\u4e00\u4e2a AI \u52a9\u624b\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\n\n\u7248\u672c: 1.0.0",showCancel:!1})}),s}return(0,d.A)(n,s),(0,r.A)(n,[{key:"componentDidMount",value:function(){var s=this.props.chatStore;s&&(this.wsUrlInput=s.wsUrl||"",this.sessionIdInput=s.sessionId||"")}},{key:"render",value:function(){var s=this.props,n=s.chatStore,e=s.counterStore,t=n||{},c=t.connected,a=(t.wsUrl,t.sessionId,t.messages),i=e||{},o=i.count;return(0,j.jsx)(p.Ss,{className:"settings-page",children:(0,j.jsxs)(p.Ss,{className:"settings-container",children:[(0,j.jsxs)(p.Ss,{className:"settings-section",children:[(0,j.jsx)(p.EY,{className:"section-title",children:"\u8fde\u63a5\u72b6\u6001"}),(0,j.jsx)(p.Ss,{className:"status-card",children:(0,j.jsxs)(p.Ss,{className:"status-indicator ".concat(c?"connected":"disconnected"),children:[(0,j.jsx)(p.EY,{className:"status-dot"}),(0,j.jsx)(p.EY,{className:"status-label",children:c?"\u5df2\u8fde\u63a5":"\u672a\u8fde\u63a5"})]})})]}),(0,j.jsxs)(p.Ss,{className:"settings-section",children:[(0,j.jsx)(p.EY,{className:"section-title",children:"\u670d\u52a1\u5668\u914d\u7f6e"}),(0,j.jsxs)(p.Ss,{className:"form-group",children:[(0,j.jsx)(p.EY,{className:"form-label",children:"WebSocket \u5730\u5740"}),(0,j.jsx)(p.pd,{className:"form-input",type:"text",placeholder:"wss://your-server.com/ws",value:this.wsUrlInput,onInput:this.handleWsUrlChange})]}),(0,j.jsxs)(p.Ss,{className:"form-group",children:[(0,j.jsx)(p.EY,{className:"form-label",children:"Session ID\uff08\u53ef\u9009\uff09"}),(0,j.jsx)(p.pd,{className:"form-input",type:"text",placeholder:"\u81ea\u52a8\u751f\u6210\u6216\u624b\u52a8\u8f93\u5165",value:this.sessionIdInput,onInput:this.handleSessionIdChange})]}),(0,j.jsxs)(p.Ss,{className:"button-group",children:[(0,j.jsx)(p.$n,{className:"action-btn primary",onClick:this.handleSaveSettings,children:"\u4fdd\u5b58\u914d\u7f6e"}),c?(0,j.jsx)(p.$n,{className:"action-btn danger",onClick:this.handleDisconnect,children:"\u65ad\u5f00\u8fde\u63a5"}):(0,j.jsx)(p.$n,{className:"action-btn success",onClick:this.handleConnect,children:"\u8fde\u63a5\u670d\u52a1\u5668"})]})]}),(0,j.jsxs)(p.Ss,{className:"settings-section",children:[(0,j.jsx)(p.EY,{className:"section-title",children:"\u6570\u636e\u7ba1\u7406"}),(0,j.jsxs)(p.Ss,{className:"info-card",children:[(0,j.jsx)(p.EY,{className:"info-label",children:"\u804a\u5929\u6d88\u606f\u6570\u91cf"}),(0,j.jsx)(p.EY,{className:"info-value",children:(null===a||void 0===a?void 0:a.length)||0})]}),(0,j.jsx)(p.$n,{className:"action-btn danger-outline",onClick:this.handleClearMessages,children:"\u6e05\u7a7a\u804a\u5929\u8bb0\u5f55"})]}),(0,j.jsxs)(p.Ss,{className:"settings-section",children:[(0,j.jsx)(p.EY,{className:"section-title",children:"\u5176\u4ed6"}),(0,j.jsxs)(p.Ss,{className:"info-card",children:[(0,j.jsx)(p.EY,{className:"info-label",children:"\u8ba1\u6570\u5668\u793a\u4f8b"}),(0,j.jsx)(p.EY,{className:"info-value",children:o})]}),(0,j.jsxs)(p.Ss,{className:"button-row",children:[(0,j.jsx)(p.$n,{className:"mini-btn",onClick:function(){return e.increment()},children:"+1"}),(0,j.jsx)(p.$n,{className:"mini-btn",onClick:function(){return e.decrement()},children:"-1"}),(0,j.jsx)(p.$n,{className:"mini-btn",onClick:function(){return e.reset()},children:"\u91cd\u7f6e"})]}),(0,j.jsx)(p.$n,{className:"action-btn",onClick:this.handleAbout,children:"\u5173\u4e8e"})]})]})})}}])}(m.Component))||c)||c),S=N,g={},v=(0,a.eU)(S,"pages/settings/index",{root:{cn:[]}},g||{});S&&S.behaviors&&(v.behaviors=(v.behaviors||[]).concat(S.behaviors));Page(v)}},function(s){var n=function(n){return s(s.s=n)};s.O(0,[907,96],function(){return n(1243)});s.O()}]);